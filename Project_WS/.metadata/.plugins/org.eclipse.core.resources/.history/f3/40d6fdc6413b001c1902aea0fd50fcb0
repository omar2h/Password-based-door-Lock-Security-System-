/*
 * App.c
 *
 *  Created on: Nov 1, 2021
 *      Author: omarh
 */


#include "App.h"
#include "../ECUAL/keypad.h"
#include <util/delay.h>

uint8 g_doorPassword[5]={0};
void App_init(){
	//UART_ConfigType UART_Configurations = {BAUDRATE_9600, DATA_8BITS, NO_PARITY, ONE_STOP_BIT};

	UART_init(9600);
	LCD_init();
	App_start();

}

void App_start(){
	uint8 key_num;
	while(1){
		/* Get the pressed button from keypad */
		key_num = KEYPAD_getPressedKey();

		/* Send the pressed key to MC2 through UART */
		UART_sendByte(key_num);
	}
}

void App_getNewPassword(){
	uint8 i, confirm_password[PASSWORD_LENGTH]={0};
	UART_sendByte('a');
//	for(i=0; i<PASSWORD_LENGTH; i++){
//		g_doorPassword[i] = KEYPAD_getPressedKey();
//		UART_sendByte(g_doorPassword[i]);
//		//LCD_intgerToString(g_doorPassword[i]);
//	}
	//App_sendPasswordViaUart();
//	LCD_clearScreen();
//	for(i=0; i<PASSWORD_LENGTH; i++){
//		confirm_password[i] = KEYPAD_getPressedKey();
//		LCD_intgerToString(confirm_password[i]);
//	}
}

void App_sendPasswordViaUart(){
	uint8 i;
	for(i=0; i<PASSWORD_LENGTH;i++){
		UART_sendByte(g_doorPassword[i]);
		_delay_ms(1);
	}
}
